# ç»Ÿä¸€å…¥å£ä½¿ç”¨è¯´æ˜

## æ¦‚è¿°

æœ¬é¡¹ç›®ç°åœ¨æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„å…¥å£æ–‡ä»¶ `index.ts`ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æ§åˆ¶æ‰§è¡Œä¸åŒçš„çˆ¬è™«è„šæœ¬ï¼Œå¹¶æ”¯æŒçµæ´»çš„é…ç½®é€‰é¡¹ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ ç»Ÿä¸€å…¥å£æ§åˆ¶å¤šä¸ªçˆ¬è™«è„šæœ¬
- âš™ï¸ å‘½ä»¤è¡Œå‚æ•°é…ç½®é¡µç èŒƒå›´
- ğŸ”§ æ”¯æŒæ‰‹åŠ¨å’Œå®šæ—¶æ¨¡å¼
- ğŸŒ ä»£ç†é…ç½®æ”¯æŒï¼ˆmainçˆ¬è™«ï¼‰
- ğŸ“– å†…ç½®å¸®åŠ©æ–‡æ¡£

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬è¯­æ³•

```bash
ts-node index.ts [é€‰é¡¹]
```

### å¯ç”¨é€‰é¡¹

| é€‰é¡¹ | ç®€å†™ | æè¿° | é»˜è®¤å€¼ |
|------|------|------|--------|
| `--scraper <type>` | `-s` | æŒ‡å®šçˆ¬è™«ç±»å‹ (main\|kb) | main |
| `--start-page <number>` | - | èµ·å§‹é¡µç  | 1 |
| `--end-page <number>` | - | ç»“æŸé¡µç  | 100 |
| `--manual` | - | æ‰‹åŠ¨æ¨¡å¼ | false |
| `--schedule` | - | å®šæ—¶æ¨¡å¼ | false |
| `--no-proxy` | - | ç¦ç”¨ä»£ç† (ä»…mainçˆ¬è™«) | false |
| `--proxy <url>` | - | æŒ‡å®šä»£ç†åœ°å€ (ä»…mainçˆ¬è™«) | - |
| `--help` | `-h` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ | - |

## ä½¿ç”¨ç¤ºä¾‹

### 1. åŸºæœ¬ä½¿ç”¨

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®å¯åŠ¨mainçˆ¬è™«
ts-node index.ts

# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
ts-node index.ts --help
```

### 2. æŒ‡å®šçˆ¬è™«ç±»å‹

```bash
# å¯åŠ¨mainçˆ¬è™«
ts-node index.ts --scraper main

# å¯åŠ¨kbçˆ¬è™«
ts-node index.ts --scraper kb
```

### 3. é…ç½®é¡µç èŒƒå›´

```bash
# mainçˆ¬è™«ï¼šçˆ¬å–1-50é¡µ
ts-node index.ts --scraper main --start-page 1 --end-page 50

# kbçˆ¬è™«ï¼šçˆ¬å–100-200é¡µ
ts-node index.ts --scraper kb --start-page 100 --end-page 200
```

### 4. æ¨¡å¼é…ç½®

```bash
# æ‰‹åŠ¨æ¨¡å¼
ts-node index.ts --scraper main --manual

# å®šæ—¶æ¨¡å¼
ts-node index.ts --scraper kb --schedule
```

### 5. ä»£ç†é…ç½®ï¼ˆä»…mainçˆ¬è™«ï¼‰

```bash
# ç¦ç”¨ä»£ç†
ts-node index.ts --scraper main --no-proxy

# æŒ‡å®šä»£ç†åœ°å€
ts-node index.ts --scraper main --proxy http://127.0.0.1:7897

# å®šæ—¶æ¨¡å¼ + ç¦ç”¨ä»£ç†
ts-node index.ts --scraper main --schedule --no-proxy
```

### 6. å¤åˆé…ç½®ç¤ºä¾‹

```bash
# kbçˆ¬è™«ï¼šæ‰‹åŠ¨æ¨¡å¼ï¼Œçˆ¬å–500-821é¡µ
ts-node index.ts --scraper kb --manual --start-page 500 --end-page 821

# mainçˆ¬è™«ï¼šå®šæ—¶æ¨¡å¼ï¼Œçˆ¬å–1-100é¡µï¼Œä½¿ç”¨è‡ªå®šä¹‰ä»£ç†
ts-node index.ts --scraper main --schedule --start-page 1 --end-page 100 --proxy http://127.0.0.1:8080
```

## NPM Scripts

ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œé¡¹ç›®è¿˜æä¾›äº†é¢„å®šä¹‰çš„npmè„šæœ¬ï¼š

### æ–°ç‰ˆæœ¬è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# åŸºæœ¬å¯åŠ¨
npm run start

# å¯åŠ¨mainçˆ¬è™«
npm run start:main

# å¯åŠ¨kbçˆ¬è™«
npm run start:kb

# mainçˆ¬è™«æ‰‹åŠ¨æ¨¡å¼
npm run start:main:manual

# mainçˆ¬è™«å®šæ—¶æ¨¡å¼
npm run start:main:schedule

# mainçˆ¬è™«å®šæ—¶æ¨¡å¼ï¼ˆæ— ä»£ç†ï¼‰
npm run start:main:schedule:noProxy

# kbçˆ¬è™«æ‰‹åŠ¨æ¨¡å¼
npm run start:kb:manual

# kbçˆ¬è™«å®šæ—¶æ¨¡å¼
npm run start:kb:schedule

# æ˜¾ç¤ºå¸®åŠ©
npm run help

# å¼€å‘æ¨¡å¼
npm run dev
```

### å…¼å®¹æ€§è„šæœ¬ï¼ˆlegacyï¼‰

ä¸ºäº†ä¿æŒå‘åå…¼å®¹ï¼ŒåŸæœ‰çš„è„šæœ¬ä»ç„¶å¯ç”¨ï¼Œä½†å»ºè®®ä½¿ç”¨æ–°çš„ç»Ÿä¸€å…¥å£ï¼š

```bash
npm run legacy:start
npm run legacy:start:manual
npm run legacy:start:schedule
npm run legacy:start:schedule:noProxy
npm run legacy:start:kb
npm run legacy:start:kb:manual
npm run legacy:start:kb:schedule
```

## çˆ¬è™«ç±»å‹è¯´æ˜

### Mainçˆ¬è™« (`main.ts`)
- åŸºäºaxioså’Œcheerioçš„ä¼ ç»Ÿçˆ¬è™«
- æ”¯æŒä»£ç†é…ç½®
- é€‚ç”¨äºç®€å•çš„HTMLé¡µé¢æŠ“å–
- æ”¯æŒæ™ºèƒ½è·³é¡µå’Œé‡å¤æ£€æµ‹

### KBçˆ¬è™« (`main_kb.ts`)
- åŸºäºPlaywrightçš„æµè§ˆå™¨è‡ªåŠ¨åŒ–çˆ¬è™«
- é€‚ç”¨äºJavaScriptæ¸²æŸ“çš„åŠ¨æ€é¡µé¢
- æ”¯æŒæˆªå›¾åŠŸèƒ½
- ä¸“é—¨é’ˆå¯¹sykb169.orgç½‘ç«™ä¼˜åŒ–

## æ³¨æ„äº‹é¡¹

1. **é¡µç èŒƒå›´éªŒè¯**ï¼šèµ·å§‹é¡µç å¿…é¡»å¤§äº0ï¼Œç»“æŸé¡µç å¿…é¡»å¤§äºç­‰äºèµ·å§‹é¡µç 
2. **çˆ¬è™«ç±»å‹éªŒè¯**ï¼šåªæ”¯æŒ `main` å’Œ `kb` ä¸¤ç§ç±»å‹
3. **ä»£ç†é…ç½®**ï¼šä»£ç†ç›¸å…³å‚æ•°ä»…å¯¹mainçˆ¬è™«æœ‰æ•ˆ
4. **æ•°æ®åº“é…ç½®**ï¼šä¸¤ä¸ªçˆ¬è™«éƒ½ä½¿ç”¨ç›¸åŒçš„æ•°æ®åº“é…ç½®
5. **é”™è¯¯å¤„ç†**ï¼šå¦‚æœå‚æ•°æ— æ•ˆï¼Œç¨‹åºä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯å¹¶é€€å‡º

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **"æ— æ•ˆçš„çˆ¬è™«ç±»å‹"é”™è¯¯**
   - ç¡®ä¿ä½¿ç”¨ `main` æˆ– `kb` ä½œä¸ºçˆ¬è™«ç±»å‹

2. **"æ— æ•ˆçš„é¡µç èŒƒå›´"é”™è¯¯**
   - æ£€æŸ¥èµ·å§‹é¡µç æ˜¯å¦å¤§äº0
   - æ£€æŸ¥ç»“æŸé¡µç æ˜¯å¦å¤§äºç­‰äºèµ·å§‹é¡µç 

3. **ts-nodeå‘½ä»¤ä¸å­˜åœ¨**
   - ç¡®ä¿å·²å®‰è£…TypeScriptå’Œts-node
   - è¿è¡Œ `npm install` å®‰è£…ä¾èµ–

4. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥æ•°æ®åº“é…ç½®æ˜¯å¦æ­£ç¡®
   - ç¡®ä¿æ•°æ®åº“æœåŠ¡æ­£åœ¨è¿è¡Œ

### è°ƒè¯•æ¨¡å¼

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æŸ¥çœ‹è¯¦ç»†çš„å¯åŠ¨ä¿¡æ¯ï¼š

```bash
# å¯åŠ¨æ—¶ä¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
ts-node index.ts --scraper kb --start-page 1 --end-page 10
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸš€ å¯åŠ¨KBçˆ¬è™«...
ğŸ“„ è„šæœ¬è·¯å¾„: /path/to/main_kb.ts
âš™ï¸  å‚æ•°: --start-page 1 --end-page 10
ğŸ“Š é¡µç èŒƒå›´: 1 - 10
```

## æ›´æ–°æ—¥å¿—

- **v1.0.0**: åˆå§‹ç‰ˆæœ¬ï¼Œæ”¯æŒç»Ÿä¸€å…¥å£å’Œå‘½ä»¤è¡Œé…ç½®
- æ·»åŠ äº†å®Œæ•´çš„å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†
- ä¿æŒäº†ä¸åŸæœ‰è„šæœ¬çš„å®Œå…¨å…¼å®¹æ€§
- æä¾›äº†ä¸°å¯Œçš„npm scriptså¿«æ·æ–¹å¼